<h2>Patient Data Form</h2>

<form [formGroup]="patientForm" (ngSubmit)="onSubmit()">
    <!-- Age -->
    <div>
        <label for="age">Age:</label>
        <input id="age" type="number" formControlName="age" placeholder="Enter patient age" />
        <div class="error" *ngIf="patientForm.get('age')?.touched && patientForm.get('age')?.invalid">
            <small *ngIf="patientForm.get('age')?.errors?.['min']">Age cannot be negative.</small>
            <small *ngIf="patientForm.get('age')?.errors?.['max']">Age cannot exceed 120.</small>
        </div>
    </div>

    <!-- Gender -->
    <div>
        <label for="gender">Gender:</label>
        <select id="gender" formControlName="gender">
            <option value="">-- Select --</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select>
    </div>

    <!-- Condition (optional) -->
    <div>
        <label for="condition">Condition:</label>
        <input id="condition" type="text" formControlName="condition" placeholder="e.g. Diabetes, Cancer, etc." />
    </div>

    <!-- Location (optional) -->
    <div>
        <label for="location">Location:</label>
        <input id="location" type="text" formControlName="location" placeholder="City, State, Country" />
    </div>

    <!-- Notes (required) -->
    <div>
        <label for="notes">Patient Notes:</label>
        <textarea id="notes" formControlName="notes" rows="4"
            placeholder="Unstructured patient notes or diagnosis..."></textarea>
        <div class="error" *ngIf="patientForm.get('notes')?.touched && patientForm.get('notes')?.invalid">
            <small *ngIf="patientForm.get('notes')?.errors?.['required']">Notes are required.</small>
        </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" [disabled]="patientForm.invalid">
        Submit
    </button>
</form>

<!-- Preview Section -->
<div class="preview" *ngIf="submittedData">
    <h3>Preview of Submitted Data:</h3>
    <p><strong>Age:</strong> {{ submittedData.age }}</p>
    <p><strong>Gender:</strong> {{ submittedData.gender }}</p>
    <p><strong>Condition:</strong> {{ submittedData.condition }}</p>
    <p><strong>Location:</strong> {{ submittedData.location }}</p>
    <p><strong>Notes:</strong> {{ submittedData.notes }}</p>
</div>